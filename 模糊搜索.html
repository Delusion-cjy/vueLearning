<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>
<body>
    <div id="app">
        <div class="wrap">
            <input type="text" id="demo" @input="creat()">
            <ul id="newsBox">
            </ul>
        </div>
    </div>
    
    <script src="./vue.js"></script>
    <script>
        const vm = new Vue({
            el:'#app',
            data() {
                return {
                    data:[{
                        "title": "你的失恋修复期有多长？",
                        "title_image": "https://img.doutuimao.net/dtmimg/b7c9ec393414982682e5a477eb995b55",
                        "desc": "美食餐饮测试一下你的失恋修复期有多长",
                        "id": "2",
                        "num": 951357,
                        "flag": "01"
                    },
                    {
                        "title": "你的撒娇指数有多高？",
                        "title_image": "https://img.doutuimao.net/dtmimg/60d8ed86d1f72357c194506270c72ac1",
                        "desc": "美食餐饮会撒娇的女人最好命，你有多会撒娇？你撒起娇来魅力又是怎么样的？快来测测吧！",
                        "id": "3",
                        "num": 963258,
                        "flag": "01"
                    },
                    {
                        "title": "你未来的结婚方式？",
                        "title_image": "https://img.doutuimao.net/dtmimg/538632e75159ce8e586778d289c66a11",
                        "desc": "相信很多人都对自己未来的结婚方式充满期待，想知道你未来的结婚方式吗？",
                        "id": "4",
                        "num": 879564,
                        "flag": "01"
                    },
                    ]
                }
            },
            created () {
              this.creat();
            },
            methods: {
                creat() {
                    var input = document.getElementById('demo')
                    var ul = document.getElementById('newsBox')
                    var value = input.value;
                    var html = "";
                    let arrnew = this.data.map((item, index) => {
                            return Object.assign({}, {
                                    'desc': item.desc,
                            })
                    })
                    console.log('arrnew',arrnew)
                    var newData = arrnew.filter(item => {
                            if (item.desc.indexOf(value) > -1) { //indexOf方法中如果xxx.indexOf("")返回值为0
                                    return item
                            }
                            return newData
                    })


                    if (newData.length > 0) {
                            for (var i = 0; i < newData.length; i++) {
                                    html += `<li>${newData[i].desc}</li>`
                            }
                    } else {
                            html += `<li>暂无数据</li>`
                    }
                    ul.innerHTML = html;
                }
            }
        })
   
        // input.onchange = function(e) {
        //         creat()
        // }

    </script>
</body>
</html>